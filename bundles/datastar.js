"use strict";(()=>{var rn="computed",ke={type:1,name:rn,keyValRule:10,removeOnLoad:!0,onLoad:({key:t,signals:e,genRX:n})=>{let r=n();e.setComputed(t,r)}};var D=t=>t.trim()==="true",U=t=>t.replace(/[A-Z]+(?![a-z])|[A-Z]/g,(e,n)=>(n?"-":"")+e.toLowerCase()),Ie=t=>t.replace(/(?:^\w|[A-Z]|\b\w)/g,function(e,n){return n==0?e.toLowerCase():e.toUpperCase()}).replace(/\s+/g,""),te=t=>new Function(`return Object.assign({}, ${t})`)();var Le={type:1,name:"signals",keyValRule:2,removeOnLoad:!0,onLoad:t=>{let{key:e,genRX:n,signals:r}=t;if(e!="")r.setValue(e,n()());else{let o=te(t.value);t.value=JSON.stringify(o),r.merge(n()())}}};var Ce={type:1,name:"star",onLoad:()=>{alert("YOU ARE PROBABLY OVERCOMPLICATING IT")}};var Oe={name:"signalValue",type:0,fn:t=>{let e=/(?<path>[\w0-9.]*)((\.value))/gm;return t.replaceAll(e,"ctx.signals.signal('$1').value")}};var I="datastar";var De="Datastar-Request",Fe="0.21.0-beta1";var He="type module";var L={Morph:"morph",Inner:"inner",Outer:"outer",Prepend:"prepend",Append:"append",Before:"before",After:"after",UpsertAttributes:"upsertAttributes"},qe=L.Morph,P={MergeFragments:"datastar-merge-fragments",MergeSignals:"datastar-merge-signals",RemoveFragments:"datastar-remove-fragments",RemoveSignals:"datastar-remove-signals",ExecuteScript:"datastar-execute-script"};function Ke(t){if(t.id)return t.id;let e=0,n=o=>(e=(e<<5)-e+o,e&e),r=o=>o.split("").forEach(i=>n(i.charCodeAt(0)));for(;t.parentNode;){if(t.id){r(`${t.id}`);break}else if(t===t.ownerDocument.documentElement)r(t.tagName);else{for(let o=1,i=t;i.previousElementSibling;i=i.previousElementSibling,o++)n(o);t=t.parentNode}t=t.parentNode}return I+e}var on="http://localhost:8080/errors";var u=(t,e)=>{let n=new Error;n.name=`error ${t}`;let r=`${on}/${t}?${new URLSearchParams(e)}`;return n.message=`for more info see ${r}`,n};var sn=Symbol.for("preact-signals"),C=1,$=2,z=4,G=8,ne=16,B=32;function ve(){re++}function be(){if(re>1){re--;return}let t,e=!1;for(;J!==void 0;){let n=J;for(J=void 0,ye++;n!==void 0;){let r=n._nextBatchedEffect;if(n._nextBatchedEffect=void 0,n._flags&=~$,!(n._flags&G)&&Ue(n))try{n._callback()}catch(o){e||(t=o,e=!0)}n=r}}if(ye=0,re--,e)throw u("BatchError, error")}var b;var J,re=0,ye=0,oe=0;function We(t){if(b===void 0)return;let e=t._node;if(e===void 0||e._target!==b)return e={_version:0,_source:t,_prevSource:b._sources,_nextSource:void 0,_target:b,_prevTarget:void 0,_nextTarget:void 0,_rollbackNode:e},b._sources!==void 0&&(b._sources._nextSource=e),b._sources=e,t._node=e,b._flags&B&&t._subscribe(e),e;if(e._version===-1)return e._version=0,e._nextSource!==void 0&&(e._nextSource._prevSource=e._prevSource,e._prevSource!==void 0&&(e._prevSource._nextSource=e._nextSource),e._prevSource=b._sources,e._nextSource=void 0,b._sources._nextSource=e,b._sources=e),e}function R(t){this._value=t,this._version=0,this._node=void 0,this._targets=void 0}R.prototype.brand=sn;R.prototype._refresh=function(){return!0};R.prototype._subscribe=function(t){this._targets!==t&&t._prevTarget===void 0&&(t._nextTarget=this._targets,this._targets!==void 0&&(this._targets._prevTarget=t),this._targets=t)};R.prototype._unsubscribe=function(t){if(this._targets!==void 0){let e=t._prevTarget,n=t._nextTarget;e!==void 0&&(e._nextTarget=n,t._prevTarget=void 0),n!==void 0&&(n._prevTarget=e,t._nextTarget=void 0),t===this._targets&&(this._targets=n)}};R.prototype.subscribe=function(t){return ie(()=>{let e=this.value,n=b;b=void 0;try{t(e)}finally{b=n}})};R.prototype.valueOf=function(){return this.value};R.prototype.toString=function(){return this.value+""};R.prototype.toJSON=function(){return this.value};R.prototype.peek=function(){let t=b;b=void 0;try{return this.value}finally{b=t}};Object.defineProperty(R.prototype,"value",{get(){let t=We(this);return t!==void 0&&(t._version=this._version),this._value},set(t){if(t!==this._value){if(ye>100)throw u("SignalCycleDetected");this._value=t,this._version++,oe++,ve();try{for(let e=this._targets;e!==void 0;e=e._nextTarget)e._target._notify()}finally{be()}}}});function Ue(t){for(let e=t._sources;e!==void 0;e=e._nextSource)if(e._source._version!==e._version||!e._source._refresh()||e._source._version!==e._version)return!0;return!1}function $e(t){for(let e=t._sources;e!==void 0;e=e._nextSource){let n=e._source._node;if(n!==void 0&&(e._rollbackNode=n),e._source._node=e,e._version=-1,e._nextSource===void 0){t._sources=e;break}}}function Be(t){let e=t._sources,n;for(;e!==void 0;){let r=e._prevSource;e._version===-1?(e._source._unsubscribe(e),r!==void 0&&(r._nextSource=e._nextSource),e._nextSource!==void 0&&(e._nextSource._prevSource=r)):n=e,e._source._node=e._rollbackNode,e._rollbackNode!==void 0&&(e._rollbackNode=void 0),e=r}t._sources=n}function q(t){R.call(this,void 0),this._fn=t,this._sources=void 0,this._globalVersion=oe-1,this._flags=z}q.prototype=new R;q.prototype._refresh=function(){if(this._flags&=~$,this._flags&C)return!1;if((this._flags&(z|B))===B||(this._flags&=~z,this._globalVersion===oe))return!0;if(this._globalVersion=oe,this._flags|=C,this._version>0&&!Ue(this))return this._flags&=~C,!0;let t=b;try{$e(this),b=this;let e=this._fn();(this._flags&ne||this._value!==e||this._version===0)&&(this._value=e,this._flags&=~ne,this._version++)}catch(e){this._value=e,this._flags|=ne,this._version++}return b=t,Be(this),this._flags&=~C,!0};q.prototype._subscribe=function(t){if(this._targets===void 0){this._flags|=z|B;for(let e=this._sources;e!==void 0;e=e._nextSource)e._source._subscribe(e)}R.prototype._subscribe.call(this,t)};q.prototype._unsubscribe=function(t){if(this._targets!==void 0&&(R.prototype._unsubscribe.call(this,t),this._targets===void 0)){this._flags&=~B;for(let e=this._sources;e!==void 0;e=e._nextSource)e._source._unsubscribe(e)}};q.prototype._notify=function(){if(!(this._flags&$)){this._flags|=z|$;for(let t=this._targets;t!==void 0;t=t._nextTarget)t._target._notify()}};Object.defineProperty(q.prototype,"value",{get(){if(this._flags&C)throw u("SignalCycleDetected");let t=We(this);if(this._refresh(),t!==void 0&&(t._version=this._version),this._flags&ne)throw u("GetComputedError",{value:this._value});return this._value}});function Ge(t){return new q(t)}function je(t){let e=t._cleanup;if(t._cleanup=void 0,typeof e=="function"){ve();let n=b;b=void 0;try{e()}catch(r){throw t._flags&=~C,t._flags|=G,Ee(t),u("CleanupEffectError",{error:r})}finally{b=n,be()}}}function Ee(t){for(let e=t._sources;e!==void 0;e=e._nextSource)e._source._unsubscribe(e);t._fn=void 0,t._sources=void 0,je(t)}function an(t){if(b!==this)throw u("EndEffectError");Be(this),b=t,this._flags&=~C,this._flags&G&&Ee(this),be()}function Y(t){this._fn=t,this._cleanup=void 0,this._sources=void 0,this._nextBatchedEffect=void 0,this._flags=B}Y.prototype._callback=function(){let t=this._start();try{if(this._flags&G||this._fn===void 0)return;let e=this._fn();typeof e=="function"&&(this._cleanup=e)}finally{t()}};Y.prototype._start=function(){if(this._flags&C)throw u("SignalCycleDetected");this._flags|=C,this._flags&=~G,je(this),$e(this),ve();let t=b;return b=this,an.bind(this,t)};Y.prototype._notify=function(){this._flags&$||(this._flags|=$,this._nextBatchedEffect=J,J=this)};Y.prototype._dispose=function(){this._flags|=G,this._flags&C||Ee(this)};function ie(t){let e=new Y(t);try{e._callback()}catch(n){throw e._dispose(),u("EffectError",{error:n})}return e._dispose.bind(e)}function Xe(t,e=!1){let n={};for(let r in t)if(t.hasOwnProperty(r)){let o=t[r];if(o instanceof R){if(e&&r.startsWith("_"))continue;n[r]=o.value}else n[r]=Xe(o)}return n}function Je(t,e,n=!1){for(let r in e)if(e.hasOwnProperty(r)){let o=e[r];if(o instanceof Object&&!Array.isArray(o))t[r]||(t[r]={}),Je(t[r],o,n);else{if(n&&t[r])continue;t[r]=new R(o)}}}function ze(t,e){for(let n in t)if(t.hasOwnProperty(n)){let r=t[n];r instanceof R?e(n,r):ze(r,e)}}function ln(t,...e){let n={};for(let r of e){let o=r.split("."),i=t,s=n;for(let l=0;l<o.length-1;l++){let c=o[l];if(!i[c])return{};s[c]||(s[c]={}),i=i[c],s=s[c]}let a=o[o.length-1];s[a]=i[a]}return n}var se=class{constructor(){this._signals={}}exists(e){return!!this.signal(e)}signal(e){let n=e.split("."),r=this._signals;for(let i=0;i<n.length-1;i++){let s=n[i];if(!r[s])return null;r=r[s]}let o=n[n.length-1];return r[o]}setSignal(e,n){let r=e.split("."),o=this._signals;for(let s=0;s<r.length-1;s++){let a=r[s];o[a]||(o[a]={}),o=o[a]}let i=r[r.length-1];o[i]=n}setComputed(e,n){let r=Ge(()=>n());this.setSignal(e,r)}value(e){return this.signal(e)?.value}setValue(e,n){let r=this.upsert(e,n);r.value=n}upsert(e,n){let r=e.split("."),o=this._signals;for(let l=0;l<r.length-1;l++){let c=r[l];o[c]||(o[c]={}),o=o[c]}let i=r[r.length-1],s=o[i];if(s)return s;let a=new R(n);return o[i]=a,a}remove(...e){for(let n of e){let r=n.split("."),o=this._signals;for(let s=0;s<r.length-1;s++){let a=r[s];if(!o[a])return;o=o[a]}let i=r[r.length-1];delete o[i]}}merge(e,n=!1){Je(this._signals,e,n)}subset(...e){return ln(this.values(),...e)}walk(e){ze(this._signals,e)}values(e=!1){return Xe(this._signals,e)}JSON(e=!0,n=!1){let r=this.values(n);return e?JSON.stringify(r,null,2):JSON.stringify(r)}toString(){return this.JSON()}};var ae=class{constructor(){this._signals=new se;this.plugins=[];this.macros=[];this.actions={};this.watchers=[];this.removals=new Map}get version(){return Fe}load(...e){e.forEach(n=>{let r;switch(n.type){case 0:this.macros.push(n);break;case 2:let o=n;this.watchers.push(o),r=o.onGlobalInit;break;case 3:this.actions[n.name]=n;break;case 1:let i=n;this.plugins.push(i),r=i.onGlobalInit;break;default:throw u("InvalidPluginType",{name:n.name,type:n.type})}if(r){let o=this;r({get signals(){return o._signals},effect:i=>ie(i),actions:this.actions,apply:this.apply.bind(this),cleanup:this.cleanup.bind(this)})}}),this.apply(document.body)}cleanup(e){let n=this.removals.get(e);if(n){for(let r of n.set)r();this.removals.delete(e)}}apply(e){let n=new Set;this.plugins.forEach((r,o)=>{this.walkDownDOM(e,i=>{o||this.cleanup(i);for(let s in i.dataset){let a=`${i.dataset[s]}`||"";if(!s.startsWith(r.name))continue;let l=s.slice(r.name.length),[c,...f]=l.split(":"),m=this.getKeyRequirement(r.keyValRule);if(c.length){if(m===1)throw u(r.name+"KeyNotAllowed");c=c[0].toLowerCase()+c.slice(1)}else if(m===2)throw u(r.name+"KeyRequired");let d=a,A=this.getValueRequirement(r.keyValRule);if(d.length){if(A===1)throw u(r.name+"ValueNotAllowed")}else if(A===2)throw u(r.name+"ValueRequired");if(r.keyValRule===15){if(c.length&&d.length)throw u(r.name+"KeyAndValueProvided");if(!c.length&&!d.length)throw u(r.name+"KeyOrValueRequired")}i.id.length||(i.id=Ke(i)),n.clear();let p=new Map;f.forEach(g=>{let[S,...N]=g.split("_");p.set(Ie(S),new Set(N))});let y=[...r.macros?.pre||[],...this.macros,...r.macros?.post||[]];for(let g of y)n.has(g)||(n.add(g),d=g.fn(d));let{actions:_,apply:T,cleanup:x}=this,E=this,w;w={get signals(){return E._signals},effect:g=>ie(g),apply:T.bind(this),cleanup:x.bind(this),actions:_,genRX:()=>this.genRX(w,...r.argNames||[]),el:i,rawKey:s,rawValue:a,key:c,value:d,mods:p};let h=r.onLoad(w);h&&(this.removals.has(i)||this.removals.set(i,{id:i.id,set:new Set}),this.removals.get(i).set.add(h)),r?.removeOnLoad&&delete i.dataset[s]}})})}genRX(e,...n){let r=e.value.split(/;|\n/).map(p=>p.trim()).filter(p=>p!=""),o=r.length-1;r[o].startsWith("return")||(r[o]=`return (${r[o]});`);let s=r.join(`
`),a=/(\w*)\(/gm,l=s.matchAll(a),c=new Set;for(let p of l)c.add(p[1]);let f=Object.keys(this.actions).filter(p=>c.has(p)),d=`${f.map(p=>`const ${p} = ctx.actions.${p}.fn;`).join(`
`)}return (()=> {${s}})()`,A=d.trim();f.forEach(p=>{A=A.replaceAll(p+"(",p+"(ctx,")});try{let p=n||[],y=new Function("ctx",...p,A);return(..._)=>y(e,..._)}catch(p){throw u("GeneratingExpressionFailed",{error:p,fnContent:d})}}walkDownDOM(e,n){if(!e||!(e instanceof HTMLElement||e instanceof SVGElement))return null;for(n(e),e=e.firstElementChild;e;)this.walkDownDOM(e,n),e=e.nextElementSibling}getKeyRequirement(e){return e=e??0,e>>2}getValueRequirement(e){return e=e??0,e&3}};var Ye=new ae;Ye.load(Ce,Oe,Le,ke);var Ze=Ye;async function un(t,e){let n=t.getReader(),r;for(;!(r=await n.read()).done;)e(r.value)}function cn(t){let e,n,r,o=!1;return function(s){e===void 0?(e=s,n=0,r=-1):e=dn(e,s);let a=e.length,l=0;for(;n<a;){o&&(e[n]===10&&(l=++n),o=!1);let c=-1;for(;n<a&&c===-1;++n)switch(e[n]){case 58:r===-1&&(r=n-l);break;case 13:o=!0;case 10:c=n;break}if(c===-1)break;t(e.subarray(l,c),r),l=n,r=-1}l===a?e=void 0:l!==0&&(e=e.subarray(l),n-=l)}}function fn(t,e,n){let r=Qe(),o=new TextDecoder;return function(s,a){if(s.length===0)n?.(r),r=Qe();else if(a>0){let l=o.decode(s.subarray(0,a)),c=a+(s[a+1]===32?2:1),f=o.decode(s.subarray(c));switch(l){case"data":r.data=r.data?r.data+`
`+f:f;break;case"event":r.event=f;break;case"id":t(r.id=f);break;case"retry":let m=parseInt(f,10);isNaN(m)||e(r.retry=m);break}}}}function dn(t,e){let n=new Uint8Array(t.length+e.length);return n.set(t),n.set(e,t.length),n}function Qe(){return{data:"",event:"",id:"",retry:void 0}}var mn="text/event-stream",pn=1e3,et="last-event-id";function tt(t,{signal:e,headers:n,onopen:r,onmessage:o,onclose:i,onerror:s,openWhenHidden:a,fetch:l,retryScaler:c=2,retryMaxWaitMs:f=3e4,retryMaxCount:m=10,...d}){return new Promise((A,p)=>{let y=0,_={...n};_.accept||(_.accept=mn);let T;function x(){T.abort(),document.hidden||N()}a||document.addEventListener("visibilitychange",x);let E=pn,w=0;function h(){document.removeEventListener("visibilitychange",x),window.clearTimeout(w),T.abort()}e?.addEventListener("abort",()=>{h(),A()});let g=l??window.fetch,S=r??function(){};async function N(){T=new AbortController;try{let V=await g(t,{...d,headers:_,signal:T.signal});await S(V),await un(V.body,cn(fn(M=>{M?_[et]=M:delete _[et]},M=>{E=M},o))),i?.(),h(),A()}catch(V){if(!T.signal.aborted)try{let M=s?.(V)??E;window.clearTimeout(w),w=window.setTimeout(N,M),E*=c,E=Math.min(E,f),y++,y>=m?(h(),p(u("SSE_MAX_RETRIES",{retryInterval:E,retryMaxCount:m,...d}))):console.error(`Datastar failed to reach ${d.method}:${t.toString()} retry in ${M}ms`)}catch(M){h(),p(M)}}}N()})}var j=`${I}-sse`,Se=`${I}-settling`,K=`${I}-swapping`,le="started",ue="finished";function O(t,e){document.addEventListener(j,n=>{if(n.detail.type!=t)return;let{argsRaw:r}=n.detail;e(r)})}function Ae(t,e){document.dispatchEvent(new CustomEvent(j,{detail:{type:t,argsRaw:e}}))}var nt=t=>`${t}`.includes("text/event-stream"),rt={type:3,name:"sse",fn:async(t,e,n={method:"GET",headers:{},onlyRemote:!0})=>{let{el:{id:r},signals:o}=t,{headers:i,onlyRemote:s}=n,a=n.method.toUpperCase();try{if(Ae(le,{elId:r}),!e?.length)throw u("NoUrlProvided");let l=Object.assign({"Content-Type":"application/json",[De]:!0},i),c={method:a,headers:l,onmessage:d=>{if(!d.event.startsWith(I))return;let A=d.event,p={},y=d.data.split(`
`);for(let T of y){let x=T.indexOf(" "),E=T.slice(0,x),w=p[E];w||(w=[],p[E]=w);let h=T.slice(x+1).trim();w.push(h)}let _={};for(let[T,x]of Object.entries(p))_[T]=x.join(`
`);Ae(A,_)},onerror:d=>{if(nt(d))throw u("InvalidContentType",{url:e,error:d});d&&console.error(d.message)}},f=new URL(e,window.location.origin),m=o.JSON(!1,s);if(a==="GET"){let d=new URLSearchParams(f.search);d.set(I,m),f.search=d.toString()}else c.body=m;try{await tt(f.toString(),c)}catch(d){if(!nt(d))throw u("SseFetchFailed",{method:a,url:e,error:d})}}finally{Ae(ue,{elId:r})}}};var gn=`${I}-indicator`,eo=`${gn}-loading`,ot={type:1,name:"indicator",keyValRule:15,onLoad:({value:t,signals:e,el:n,key:r})=>{let o=r.length>0,i=t.length>0;if(o&&i||!o&&!i)throw u("XORKeyAndValue");let s=o?r:t,a=e.upsert(s,!1),l=c=>{let{type:f,argsRaw:{elId:m}}=c.detail;if(m===n.id)switch(f){case le:a.value=!0;break;case ue:a.value=!1;break}};return document.addEventListener(j,l),()=>{document.removeEventListener(j,l)}}};var it={type:2,name:P.ExecuteScript,onGlobalInit:async()=>{O(P.ExecuteScript,({autoRemove:t=`${!0}`,attributes:e=He,script:n})=>{let r=D(t);if(!n?.length)throw u("NoScriptProvided");let o=document.createElement("script");e.split(`
`).forEach(i=>{let s=i.indexOf(" "),a=s?i.slice(0,s):i,l=s?i.slice(s):"";o.setAttribute(a.trim(),l.trim())}),o.text=n,document.head.appendChild(o),r&&o.remove()})}};var Z=document,X=!!Z.startViewTransition;var fe=new WeakSet;function ut(t,e,n={}){t instanceof Document&&(t=t.documentElement);let r;typeof e=="string"?r=Sn(e):r=e;let o=An(r),i=vn(t,o,n);return ct(t,o,i)}function ct(t,e,n){if(n.head.block){let r=t.querySelector("head"),o=e.querySelector("head");if(r&&o){let i=dt(o,r,n);Promise.all(i).then(()=>{ct(t,e,Object.assign(n,{head:{block:!1,ignore:!0}}))});return}}if(n.morphStyle==="innerHTML")return ft(e,t,n),t.children;if(n.morphStyle==="outerHTML"||n.morphStyle==null){let r=Tn(e,t,n);if(!r)throw u("NoBestMatchFound",{old:t,new:e});let o=r?.previousSibling,i=r?.nextSibling,s=de(t,r,n);return r?_n(o,s,i):[]}else throw u("InvalidMorphStyle",{style:n.morphStyle})}function de(t,e,n){if(!(n.ignoreActive&&t===document.activeElement))if(e==null){if(n.callbacks.beforeNodeRemoved(t)===!1)return;t.remove(),n.callbacks.afterNodeRemoved(t);return}else{if(me(t,e))return n.callbacks.beforeNodeMorphed(t,e)===!1?void 0:(t instanceof HTMLHeadElement&&n.head.ignore||(e instanceof HTMLHeadElement&&t instanceof HTMLHeadElement&&n.head.style!==L.Morph?dt(e,t,n):(yn(e,t),ft(e,t,n))),n.callbacks.afterNodeMorphed(t,e),t);if(n.callbacks.beforeNodeRemoved(t)===!1||n.callbacks.beforeNodeAdded(e)===!1)return;if(!t.parentElement)throw u("NoParentElementFound",{oldNode:t});return t.parentElement.replaceChild(e,t),n.callbacks.afterNodeAdded(e),n.callbacks.afterNodeRemoved(t),e}}function ft(t,e,n){let r=t.firstChild,o=e.firstChild,i;for(;r;){if(i=r,r=i.nextSibling,o==null){if(n.callbacks.beforeNodeAdded(i)===!1)return;e.appendChild(i),n.callbacks.afterNodeAdded(i),W(n,i);continue}if(mt(i,o,n)){de(o,i,n),o=o.nextSibling,W(n,i);continue}let s=bn(t,e,i,o,n);if(s){o=st(o,s,n),de(s,i,n),W(n,i);continue}let a=En(t,i,o,n);if(a){o=st(o,a,n),de(a,i,n),W(n,i);continue}if(n.callbacks.beforeNodeAdded(i)===!1)return;e.insertBefore(i,o),n.callbacks.afterNodeAdded(i),W(n,i)}for(;o!==null;){let s=o;o=o.nextSibling,pt(s,n)}}function yn(t,e){let n=t.nodeType;if(n===1){for(let r of t.attributes)e.getAttribute(r.name)!==r.value&&e.setAttribute(r.name,r.value);for(let r of e.attributes)t.hasAttribute(r.name)||e.removeAttribute(r.name)}if((n===Node.COMMENT_NODE||n===Node.TEXT_NODE)&&e.nodeValue!==t.nodeValue&&(e.nodeValue=t.nodeValue),t instanceof HTMLInputElement&&e instanceof HTMLInputElement&&t.type!=="file")e.value=t.value||"",ce(t,e,"value"),ce(t,e,"checked"),ce(t,e,"disabled");else if(t instanceof HTMLOptionElement)ce(t,e,"selected");else if(t instanceof HTMLTextAreaElement&&e instanceof HTMLTextAreaElement){let r=t.value,o=e.value;r!==o&&(e.value=r),e.firstChild&&e.firstChild.nodeValue!==r&&(e.firstChild.nodeValue=r)}}function ce(t,e,n){let r=t.getAttribute(n),o=e.getAttribute(n);r!==o&&(r?e.setAttribute(n,r):e.removeAttribute(n))}function dt(t,e,n){let r=[],o=[],i=[],s=[],a=n.head.style,l=new Map;for(let f of t.children)l.set(f.outerHTML,f);for(let f of e.children){let m=l.has(f.outerHTML),d=n.head.shouldReAppend(f),A=n.head.shouldPreserve(f);m||A?d?o.push(f):(l.delete(f.outerHTML),i.push(f)):a===L.Append?d&&(o.push(f),s.push(f)):n.head.shouldRemove(f)!==!1&&o.push(f)}s.push(...l.values());let c=[];for(let f of s){let m=document.createRange().createContextualFragment(f.outerHTML).firstChild;if(!m)throw u("NewElementCouldNotBeCreated",{newNode:f});if(n.callbacks.beforeNodeAdded(m)){if(m.hasAttribute("href")||m.hasAttribute("src")){let d,A=new Promise(p=>{d=p});m.addEventListener("load",function(){d(void 0)}),c.push(A)}e.appendChild(m),n.callbacks.afterNodeAdded(m),r.push(m)}}for(let f of o)n.callbacks.beforeNodeRemoved(f)!==!1&&(e.removeChild(f),n.callbacks.afterNodeRemoved(f));return n.head.afterHeadMorphed(e,{added:r,kept:i,removed:o}),c}function F(){}function vn(t,e,n){return{target:t,newContent:e,config:n,morphStyle:n.morphStyle,ignoreActive:n.ignoreActive,idMap:Nn(t,e),deadIds:new Set,callbacks:Object.assign({beforeNodeAdded:F,afterNodeAdded:F,beforeNodeMorphed:F,afterNodeMorphed:F,beforeNodeRemoved:F,afterNodeRemoved:F},n.callbacks),head:Object.assign({style:"merge",shouldPreserve:r=>r.getAttribute("im-preserve")==="true",shouldReAppend:r=>r.getAttribute("im-re-append")==="true",shouldRemove:F,afterHeadMorphed:F},n.head)}}function mt(t,e,n){return!t||!e?!1:t.nodeType===e.nodeType&&t.tagName===e.tagName?t?.id?.length&&t.id===e.id?!0:Q(n,t,e)>0:!1}function me(t,e){return!t||!e?!1:t.nodeType===e.nodeType&&t.tagName===e.tagName}function st(t,e,n){for(;t!==e;){let r=t;if(t=t?.nextSibling,!r)throw u("NoTemporaryNodeFound",{startInclusive:t,endExclusive:e});pt(r,n)}return W(n,e),e.nextSibling}function bn(t,e,n,r,o){let i=Q(o,n,e),s=null;if(i>0){s=r;let a=0;for(;s!=null;){if(mt(n,s,o))return s;if(a+=Q(o,s,t),a>i)return null;s=s.nextSibling}}return s}function En(t,e,n,r){let o=n,i=e.nextSibling,s=0;for(;o&&i;){if(Q(r,o,t)>0)return null;if(me(e,o))return o;if(me(i,o)&&(s++,i=i.nextSibling,s>=2))return null;o=o.nextSibling}return o}var at=new DOMParser;function Sn(t){let e=t.replace(/<svg(\s[^>]*>|>)([\s\S]*?)<\/svg>/gim,"");if(e.match(/<\/html>/)||e.match(/<\/head>/)||e.match(/<\/body>/)){let n=at.parseFromString(t,"text/html");if(e.match(/<\/html>/))return fe.add(n),n;{let r=n.firstChild;return r?(fe.add(r),r):null}}else{let r=at.parseFromString(`<body><template>${t}</template></body>`,"text/html").body.querySelector("template")?.content;if(!r)throw u("NoContentFound",{newContent:t});return fe.add(r),r}}function An(t){if(t==null)return document.createElement("div");if(fe.has(t))return t;if(t instanceof Node){let e=document.createElement("div");return e.append(t),e}else{let e=document.createElement("div");for(let n of[...t])e.append(n);return e}}function _n(t,e,n){let r=[],o=[];for(;t;)r.push(t),t=t.previousSibling;for(;r.length>0;){let i=r.pop();o.push(i),e?.parentElement?.insertBefore(i,e)}for(o.push(e);n;)r.push(n),o.push(n),n=n.nextSibling;for(;r.length;)e?.parentElement?.insertBefore(r.pop(),e.nextSibling);return o}function Tn(t,e,n){let r=t.firstChild,o=r,i=0;for(;r;){let s=wn(r,e,n);s>i&&(o=r,i=s),r=r.nextSibling}return o}function wn(t,e,n){return me(t,e)?.5+Q(n,t,e):0}function pt(t,e){W(e,t),e.callbacks.beforeNodeRemoved(t)!==!1&&(t.remove(),e.callbacks.afterNodeRemoved(t))}function Rn(t,e){return!t.deadIds.has(e)}function xn(t,e,n){return t.idMap.get(n)?.has(e)||!1}function W(t,e){let n=t.idMap.get(e);if(n)for(let r of n)t.deadIds.add(r)}function Q(t,e,n){let r=t.idMap.get(e);if(!r)return 0;let o=0;for(let i of r)Rn(t,i)&&xn(t,i,n)&&++o;return o}function lt(t,e){let n=t.parentElement,r=t.querySelectorAll("[id]");for(let o of r){let i=o;for(;i!==n&&i;){let s=e.get(i);s==null&&(s=new Set,e.set(i,s)),s.add(o.id),i=i.parentElement}}}function Nn(t,e){let n=new Map;return lt(t,n),lt(e,n),n}var ht={type:2,name:P.MergeFragments,onGlobalInit:async t=>{let e=document.createElement("template");O(P.MergeFragments,({fragments:n="<div></div>",selector:r="",mergeMode:o=qe,settleDuration:i=`${300}`,useViewTransition:s=`${!1}`})=>{let a=parseInt(i),l=D(s);e.innerHTML=n.trim(),[...e.content.children].forEach(f=>{if(!(f instanceof Element))throw u("NoFragmentsFound");let m=r||`#${f.getAttribute("id")}`,d=[...document.querySelectorAll(m)||[]];if(!d.length)throw u("NoTargetsFound",{selectorOrID:m});X&&l?Z.startViewTransition(()=>gt(t,o,a,f,d)):gt(t,o,a,f,d)})})}};function gt(t,e,n,r,o){for(let i of o){i.classList.add(K);let s=i.outerHTML,a=i;switch(e){case L.Morph:let f=ut(a,r,{callbacks:{beforeNodeRemoved:(m,d)=>(t.cleanup(m),!0)}});if(!f?.length)throw u("MorphFailed");a=f[0];break;case L.Inner:a.innerHTML=r.innerHTML;break;case L.Outer:a.replaceWith(r);break;case L.Prepend:a.prepend(r);break;case L.Append:a.append(r);break;case L.Before:a.before(r);break;case L.After:a.after(r);break;case L.UpsertAttributes:r.getAttributeNames().forEach(m=>{let d=r.getAttribute(m);a.setAttribute(m,d)});break;default:throw u("InvalidMergeMode",{mergeMode:e})}t.cleanup(a);let l=a.classList;l.add(K),t.apply(document.body),setTimeout(()=>{i.classList.remove(K),l.remove(K)},n);let c=a.outerHTML;s!==c&&(l.add(Se),setTimeout(()=>{l.remove(Se)},n))}}var yt={type:2,name:P.MergeSignals,onGlobalInit:async t=>{O(P.MergeSignals,({signals:e="{}",onlyIfMissing:n=`${!1}`})=>{let{signals:r}=t,o=D(n);r.merge(te(e),o),t.apply(document.body)})}};var vt={type:2,name:P.RemoveFragments,onGlobalInit:async()=>{O(P.RemoveFragments,({selector:t,settleDuration:e=`${300}`,useViewTransition:n=`${!1}`})=>{if(!t.length)throw u("NoSelectorProvided");let r=parseInt(e),o=D(n),i=document.querySelectorAll(t),s=()=>{for(let a of i)a.classList.add(K);setTimeout(()=>{for(let a of i)a.remove()},r)};X&&o?Z.startViewTransition(()=>s()):s()})}};var bt={type:2,name:P.RemoveSignals,onGlobalInit:async t=>{O(P.RemoveSignals,({paths:e=""})=>{let n=e.split(`
`).map(r=>r.trim());if(!n?.length)throw u("NoPathsProvided");t.signals.remove(...n),t.apply(document.body)})}};var Et={type:3,name:"clipboard",fn:(t,e)=>{if(!navigator.clipboard)throw u("ClipboardNotAvailable");navigator.clipboard.writeText(e)}};var St="once",At="half",_t="full",Tt={type:1,name:"intersects",keyValRule:6,mods:new Set([St,At,_t]),onLoad:({el:t,rawKey:e,mods:n,genRX:r})=>{let o={threshold:0};n.has(_t)?o.threshold=1:n.has(At)&&(o.threshold=.5);let i=r(),s=new IntersectionObserver(a=>{a.forEach(l=>{l.isIntersecting&&(i(),n.has(St)&&(s.disconnect(),delete t.dataset[e]))})},o);return s.observe(t),()=>s.disconnect()}};var wt="session",Rt={type:1,name:"persist",mods:new Set([wt]),onLoad:({key:t,value:e,signals:n,effect:r,mods:o})=>{t===""&&(t=I);let i=o.has(wt)?sessionStorage:localStorage,s=e.split(/\s+/).filter(c=>c!==""),a=()=>{let c=i.getItem(t)||"{}",f=JSON.parse(c);n.merge(f)},l=()=>{let c;s.length?c=n.subset(...s):c=n.values(),i.setItem(t,JSON.stringify(c))};return a(),r(()=>{l()})}};var xt={type:1,name:"replaceUrl",keyValRule:6,onLoad:({effect:t,genRX:e})=>{let n=e();return t(()=>{let r=n(),o=window.location.href,i=new URL(r,o).toString();window.history.replaceState({},"",i)})}};var pe="smooth",we="instant",Re="auto",Nt="hstart",Vt="hcenter",Mt="hend",Pt="hnearest",kt="vstart",It="vcenter",Lt="vend",Ct="vnearest",Mn="focus",ge="center",Ot="start",Dt="end",Ft="nearest",Ht={type:1,name:"scrollIntoView",keyValRule:5,mods:new Set([pe,we,Re,Nt,Vt,Mt,Pt,kt,It,Lt,Ct,Mn]),onLoad:({el:t,mods:e,rawKey:n})=>{t.tabIndex||t.setAttribute("tabindex","0");let r={behavior:pe,block:ge,inline:ge};if(e.has(pe)&&(r.behavior=pe),e.has(we)&&(r.behavior=we),e.has(Re)&&(r.behavior=Re),e.has(Nt)&&(r.inline=Ot),e.has(Vt)&&(r.inline=ge),e.has(Mt)&&(r.inline=Dt),e.has(Pt)&&(r.inline=Ft),e.has(kt)&&(r.block=Ot),e.has(It)&&(r.block=ge),e.has(Lt)&&(r.block=Dt),e.has(Ct)&&(r.block=Ft),!(t instanceof HTMLElement||t instanceof SVGElement))throw u("NotHtmlSvgElement, el");return t.tabIndex||t.setAttribute("tabindex","0"),t.scrollIntoView(r),e.has("focus")&&t.focus(),delete t.dataset[n],()=>{}}};var qt="none",Kt="display",Wt={type:1,name:"show",keyValRule:6,onLoad:({el:{style:t},genRX:e,effect:n})=>{let r=e();return n(async()=>{r()?t.display===qt&&t.removeProperty(Kt):t.setProperty(Kt,qt)})}};var xe="view-transition",Ut={type:1,name:xe,keyValRule:6,onGlobalInit(){let t=!1;if(document.head.childNodes.forEach(e=>{e instanceof HTMLMetaElement&&e.name===xe&&(t=!0)}),!t){let e=document.createElement("meta");e.name=xe,e.content="same-origin",document.head.appendChild(e)}},onLoad:({effect:t,el:e,genRX:n})=>{if(!X){console.error("Browser does not support view transitions");return}let r=n();return t(()=>{let o=r();if(!o?.length)return;let i=e.style;i.viewTransitionName=o})}};var $t={type:1,name:"attributes",keyValRule:2,canHaveKey:!0,mustHaveValue:!0,onLoad:({el:t,genRX:e,key:n,effect:r})=>{let o=e();return n===""?r(async()=>{let i=o();Object.entries(i).forEach(([s,a])=>{t.setAttribute(s,a)})}):(n=U(n),r(async()=>{let i=!1;try{i=o()}catch{}let s;typeof i=="string"?s=i:s=JSON.stringify(i),!s||s==="false"||s==="null"||s==="undefined"?t.removeAttribute(n):t.setAttribute(n,s)}))}};var Pn=/^data:(?<mime>[^;]+);base64,(?<contents>.*)$/,Bt=["change","input","keydown"],Gt={type:1,name:"bind",keyValRule:15,onLoad:t=>{let{el:e,value:n,key:r,signals:o,effect:i}=t,s=r.length>0,a=n.length>0;if(s&&a||!s&&!a)throw u("XORKeyAndValue");let l=s?r:n,c=()=>{},f=()=>{};if(typeof l!="string")throw u("InvalidExpression");let m=e.tagName.toLowerCase(),d="",A=m.includes("input"),p=e.getAttribute("type"),y=m.includes("checkbox")||A&&p==="checkbox";y&&(d=!1),A&&p==="number"&&(d=0);let T=m.includes("select"),x=m.includes("radio")||A&&p==="radio",E=A&&p==="file";x&&(e.getAttribute("name")?.length||e.setAttribute("name",l)),o.upsert(l,d),c=()=>{let h="value"in e,g=o.value(l),S=`${g}`;if(y||x){let N=e;y?N.checked=!!g||g==="true":x&&(N.checked=S===N.value)}else if(!E)if(T){let N=e;N.multiple?Array.from(N.options).forEach(V=>{V?.disabled||(Array.isArray(g)||typeof g=="string"?V.selected=g.includes(V.value):typeof g=="number"?V.selected=g===Number(V.value):V.selected=g)}):N.value=S}else h?e.value=S:e.setAttribute("value",S)},f=async()=>{if(E){let S=[...e?.files||[]],N=[],V=[],M=[];await Promise.all(S.map(Pe=>new Promise(nn=>{let H=new FileReader;H.onload=()=>{if(typeof H.result!="string")throw u("InvalidFileResultType",{type:typeof H.result});let he=H.result.match(Pn);if(!he?.groups)throw u("InvalidDataUri",{result:H.result});N.push(he.groups.contents),V.push(he.groups.mime),M.push(Pe.name)},H.onloadend=()=>nn(void 0),H.readAsDataURL(Pe)}))),o.setValue(l,N);let Ve=`${l}Mimes`,Me=`${l}Names`;Ve in o&&o.upsert(Ve,V),Me in o&&o.upsert(Me,M);return}let h=o.value(l),g=e||e;if(typeof h=="number"){let S=Number(g.value||g.getAttribute("value"));o.setValue(l,S)}else if(typeof h=="string"){let S=g.value||g.getAttribute("value")||"";o.setValue(l,S)}else if(typeof h=="boolean")if(y){let S=g.checked||g.getAttribute("checked")==="true";o.setValue(l,S)}else{let S=!!(g.value||g.getAttribute("value"));o.setValue(l,S)}else if(!(typeof h>"u"))if(Array.isArray(h))if(T){let V=[...e.selectedOptions].filter(M=>M.selected).map(M=>M.value);o.setValue(l,V)}else{let S=JSON.stringify(g.value.split(","));o.setValue(l,S)}else throw u("UnsupportedSignalType",{current:typeof h})},Bt.forEach(h=>e.addEventListener(h,f));let w=i(()=>c());return()=>{w(),Bt.forEach(h=>{e.removeEventListener(h,f)})}}};var jt={type:1,name:"class",keyValRule:2,onLoad:({key:t,el:e,genRX:n,effect:r})=>{let o=e.classList,i=n();return r(()=>{if(t===""){let s=i();for(let[a,l]of Object.entries(s)){let c=a.split(/\s+/);l?o.add(...c):o.remove(...c)}}else{let s=i(),a=U(t);s?o.add(a):o.remove(a)}})}};function Ne(t){if(!t||t.size<=0)return 0;for(let e of t){if(e.endsWith("ms"))return Number(e.replace("ms",""));if(e.endsWith("s"))return Number(e.replace("s",""))*1e3;try{return parseFloat(e)}catch{}}return 0}function ee(t,e,n=!1){return t?t.has(e):n}function Xt(t,e,n=!1,r=!0){let o=-1,i=()=>o&&clearTimeout(o);return function(...a){i(),n&&!o&&t(...a),o=setTimeout(()=>{r&&t(...a),i()},e)}}function Jt(t,e,n=!0,r=!1){let o=!1;return function(...s){o||(n&&t(...s),o=!0,setTimeout(()=>{o=!1,r&&t(...s)},e))}}var kn=new Set(["window","once","passive","capture","debounce","throttle","remote","outside"]),zt={type:1,name:"on",keyValRule:10,argNames:["evt"],onLoad:({el:t,key:e,genRX:n,mods:r,signals:o,effect:i})=>{let s=n(),a=t;r.has("window")&&(a=window);let l=y=>{s(y)},c=r.get("debounce");if(c){let y=Ne(c),_=ee(c,"leading",!1),T=!ee(c,"noTrail",!1);l=Xt(l,y,_,T)}let f=r.get("throttle");if(f){let y=Ne(f),_=!ee(f,"noLeading",!1),T=ee(f,"trail",!1);l=Jt(l,y,_,T)}let m={capture:!0,passive:!1,once:!1};r.has("capture")||(m.capture=!1),r.has("passive")&&(m.passive=!0),r.has("once")&&(m.once=!0),[...r.keys()].filter(y=>!kn.has(y)).forEach(y=>{let _=r.get(y)||[],T=l;l=()=>{let E=event,w=E[y],h;if(typeof w=="function")h=w(..._);else if(typeof w=="boolean")h=w;else if(typeof w=="string"){let g=w.toLowerCase().trim(),S=[..._].join("").toLowerCase().trim();h=g===S}else throw u("InvalidValue",{attrName:y,key:e,el:t});h&&T(E)}});let A="",p=U(e).toLowerCase();switch(p){case"load":return l(),delete t.dataset.onLoad,()=>{};case"raf":let y,_=()=>{l(),y=requestAnimationFrame(_)};return y=requestAnimationFrame(_),()=>{y&&cancelAnimationFrame(y)};case"signals-change":return i(()=>{let x=r.has("remote"),E=o.JSON(!1,x);A!==E&&(A=E,l())});default:if(r.has("outside")){a=document;let x=l,E=!1;l=h=>{let g=h?.target;if(!g)return;let S=t.id===g.id;S&&E&&(E=!1),!S&&!E&&(x(h),E=!0)}}return a.addEventListener(p,l,m),()=>{a.removeEventListener(p,l)}}}};var Yt={type:1,name:"ref",keyValRule:15,onLoad:({el:t,key:e,value:n,signals:r})=>{let o=e.length>0,i=n.length>0;if(o&&i||!o&&!i)throw u("XORKeyAndValue");let s=o?e:n;return r.upsert(s,t),()=>r.setValue(s,null)}};var Zt={type:1,name:"text",keyValRule:6,onLoad:t=>{let{el:e,genRX:n,effect:r}=t,o=n();return e instanceof HTMLElement||u("NotHtmlElement"),r(()=>{let i=o(t);e.textContent=`${i}`})}};var{round:In,max:Ln,min:Cn}=Math,Qt={type:3,name:"fit",fn:(t,e,n,r,o,i,s=!1,a=!1)=>{let l=(e-n)/(r-n)*(i-o)+o;return a&&(l=In(l)),s&&(l=Ln(o,Cn(i,l))),l}};var en={type:3,name:"setAll",fn:(t,e,n)=>{let r=new RegExp(e);t.signals.walk((o,i)=>r.test(o)&&(i.value=n))}};var tn={type:3,name:"toggleAll",fn:(t,e)=>{let n=new RegExp(e);t.signals.walk((r,o)=>n.test(r)&&(o.value=!o.value))}};Ze.load($t,Gt,ot,Yt,jt,zt,Wt,Zt,rt,ht,yt,vt,bt,it,Et,Tt,Rt,xt,Ht,Ut,Qt,en,tn);})();
//# sourceMappingURL=datastar.js.map
